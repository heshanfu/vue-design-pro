(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{BNWl:function(e,t,n){"use strict";var r=n("IfOX");n.n(r).a},EXSd:function(e,t,n){"use strict";n.r(t);var r={data:function(){return{layout:"admin"}},methods:{handleRouteUpdate:function(e,t){this.layout=e.meta.layout||"admin"}},watch:{$route:"handleRouteUpdate"},computed:{currentLayout:function(){var e=this.layout.replace(/^[a-z]/,function(e){return e.toUpperCase()});return function(){return n("PtdW")("./".concat(e,".vue"))}}}},o=(n("BNWl"),n("KHd+")),a=Object(o.a)(r,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"root"}},[t("transition",{attrs:{name:"layout",mode:"out-in"}},[t(this.currentLayout,{tag:"component"},[t("route-view")],1)],1)],1)},[],!1,null,"35c1c6bc",null);a.options.__file="App.vue";t.default=a.exports},IfOX:function(e,t,n){},JGWq:function(e,t,n){},PtdW:function(e,t,n){var r={"./Admin.vue":["o2aR",0,14],"./Login.vue":["Qk7m",15]};function o(e){var t=r[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}o.keys=function(){return Object.keys(r)},o.id="PtdW",e.exports=o},bOXH:function(e,t,n){var r={"./Access/Admin":["ZdDK",1],"./Access/Admin.vue":["ZdDK",1],"./Access/User":["hd1C",2],"./Access/User.vue":["hd1C",2],"./App":["EXSd"],"./App.vue":["EXSd"],"./Dashboard/Analysis":["xUMo",0,3],"./Dashboard/Analysis.vue":["xUMo",0,3],"./Dashboard/Workspace":["as7q",0,4],"./Dashboard/Workspace.vue":["as7q",0,4],"./Form/Advanced":["Gkb5",5],"./Form/Advanced.vue":["Gkb5",5],"./Form/Basic":["ML1F",6],"./Form/Basic.vue":["ML1F",6],"./Form/Step/Confirm":["2v5L",7],"./Form/Step/Confirm.vue":["2v5L",7],"./Form/Step/Index":["+rlX",8],"./Form/Step/Index.vue":["+rlX",8],"./Form/Step/Info":["5fVD",9],"./Form/Step/Info.vue":["5fVD",9],"./Form/Step/Success":["t2V9",10],"./Form/Step/Success.vue":["t2V9",10],"./Login":["3R26",11],"./Login.vue":["3R26",11]};function o(e){var t=r[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}o.keys=function(){return Object.keys(r)},o.id="bOXH",e.exports=o},tjUo:function(e,t,n){"use strict";n.r(t);var r=n("Kw5r"),o=n("jE9Z"),a=n("L2JU"),i=(n("sFTC"),n("MVZn")),c=n.n(i);function s(e){var t={};return e.forEach(function(e){var r=function(e){for(var t=e.split("/"),n=[t[0].replace(/^[A-Z]/,function(e){return e.toLowerCase()})],r=1;r<t.length;r++){var o=t[r].replace(/^[a-z]/,function(e){return e.toUpperCase()});n.push(o)}return n.join("")}(e);t[r]||(t[r]=function(){return n("bOXH")("./".concat(e))})}),t}var u,l=s(["Login","Dashboard/Analysis","Dashboard/Workspace","Form/Basic","Form/Step/Index","Form/Step/Info","Form/Step/Confirm","Form/Step/Success","Form/Advanced"]),f=s(["Access","Access/Admin","Access/User"]),m=function(){return n.e(13).then(n.bind(null,"+hCm"))},p=[{path:"/",component:l.login,meta:{hidden:!0,layout:"login"}},{path:"/dashboard",component:m,redirect:"/dashboard/analysis",meta:{title:"Dashboard",icon:"el-icon-service"},children:[{path:"analysis",component:l.dashboardAnalysis,meta:{title:"分析页"}},{path:"workspace",component:l.dashboardWorkspace,meta:{title:"工作台"}}]},{path:"/form",component:m,redirect:"/form/basic",meta:{title:"表单页",icon:"el-icon-document"},children:[{path:"basic",component:l.formBasic,meta:{title:"基础表单"}},{path:"step",component:l.formStepIndex,redirect:"step/info",meta:{title:"分步表单",hideChildren:!0,setIndex:0},children:[{path:"info",component:l.formStepInfo,meta:{title:"info"}},{path:"confirm",component:l.formStepConfirm,meta:{title:"confirm"},beforeEnter:function(e,t,n){"/form/step/info"!==t.path?n("/form/step/info"):n()}},{path:"success",component:l.formStepSuccess,meta:{title:"success"},beforeEnter:function(e,t,n){"/form/step/confirm"!==t.path?n("/form/step/info"):n()}}]},{path:"advanced",component:l.formAdvanced,meta:{title:"高级表单"}}]}],d=[{path:"/access",component:m,meta:{title:"Access",icon:"el-icon-view"},children:[{path:"admin",component:f.accessAdmin,meta:{title:"admin",role:["admin"]}},{path:"user",component:f.accessUser,meta:{title:"user",role:["user"]}}]}],h={userInfo:{},role:[],token:"",routes:p,addRoutes:[]},v=n("lSNA"),g=n.n(v),S=n("RIqP"),E=n.n(S),y="SET_USER_INFO",T="SET_ROLE",A="SET_TOKEN",w="SET_ROUTES",b=(u={},g()(u,y,function(e,t){e.userInfo=t}),g()(u,T,function(e,t){e.role=t}),g()(u,A,function(e,t){e.token=t}),g()(u,w,function(e,t){e.addRoutes=t,e.routes=E()(p).concat(E()(t))}),u),k=n("cDf5"),R=n.n(k),_="/login",I="/token",O="/user",F="/analysis",D="/workspace/projects",C="/workspace/activities",L="/workspace/radar",U="/workspace/teams",N="/form/step",x="/form/basic",P=n("vDqi"),j=n.n(P).a.create({baseURL:"https://vue-design-pro.now.sh/api",timeout:5e3});j.interceptors.request.use(function(e){return e},function(e){return e&&console.error("[Request error]: ".concat(e)),Promise.reject(e)}),j.interceptors.response.use(function(e){return e},function(e){return e&&console.error("[Response error]: ".concat(e)),Promise.reject(e)});var W=j,V=n("s4NR"),M=n.n(V);var X="__vue-design-pro__";function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;return sessionStorage.getItem(e)}var q=n("XJYT"),G=n.n(q);var J={state:h,getters:{userInfo:function(e){return e.userInfo},role:function(e){return e.role},routes:function(e){return e.routes},addRoutes:function(e){return e.addRoutes}},mutations:b,actions:{pushLogin:function(e,t){var n=e.commit,r=e.dispatch,o=e.getters,a=t.userInfo,i=t.replace;return function(e){return W.post(_,e)}(a).then(function(e){var t=e.data;if(0!==t.errno)throw new Error("用户名或密码错误");if(!t.token)throw new Error("[Token]: Wrong token response");if(!Array.isArray(t.role))throw new Error("[Role]: Wrong role response");return t}).then(function(e){q.Notification.success({title:"Success",message:"登陆成功，正在跳转..."}),n(T,e.role),n(A,e.token),r("createExtraRoutes",{role:e.role}).then(function(){return Re.addRoutes(o.addRoutes)}),function(e){var t=e.key,n=void 0===t?X:t,r=e.token;sessionStorage.setItem(n,r)}({token:e.token}),i("/dashboard/analysis")}).catch(function(e){q.Notification.error({title:"Error",message:"".concat(e)}),console.error(e)})},validateToken:function(e){var t=e.commit,n=e.dispatch,r=e.getters;return function(e){if(!e)throw new Error("Token is required.");return"object"!==R()(e)&&(e={token:e}),W.get("".concat(I,"?").concat(M.a.stringify(e)))}(B()).then(function(e){return e.data}).then(function(e){if(0!==e.errno)throw new Error("errno: ".concat(e));t(T,e.role),n("createExtraRoutes",{role:e.role}).then(function(){return Re.addRoutes(r.addRoutes)})}).catch(console.error)},fetchUserInfo:function(e){var t=e.commit;return W.get(O).then(function(e){return e.data}).then(function(e){if(0!==e.errno)throw new Error("[errno]: ".concat(e.errno));return t(y,e),e}).catch(console.error)},createExtraRoutes:function(e,t){var n=e.commit,r=t.role;if(!Array.isArray(r))throw new TypeError("[createExtraRoutes]:".concat(r," should be a array"));var o=r.includes("admin")?d:function e(t,n){var r=[];t.forEach(function(t){var o=c()({},t);(function(e,t){return!e.meta||!e.meta.role||t.some(function(t){return e.meta.role.includes(t)})})(t,n)&&(o.children&&(o.children=e(o.children,n)),r.push(o))});return r}(d,r);n(w,o)},logout:function(e,t){e.commit;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;sessionStorage.removeItem(e)}(),t("/"),location.reload()}}};function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",r=[],o=[],a=!0,i=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var l=s.value;r.push(l[t]),o.push(l[n])}}catch(e){i=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}return{labels:r,datasets:o}}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",r=[],o=!0,a=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var l=s.value;r.push(c()({},l,{percent:l[n]/t}))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return r}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return e.reduce(function(e,n){return g()({},t,e[t]+n[t])},g()({},t,0))[t]}var Z,Q="SET_SALES",z="SET_VISITORS",$="SET_PAYMENTS",ee="SET_OPERATIONS",te="SET_RANK_LIST",ne="SET_SEARCH_DATA",re="SET_SALES_TYPE",oe={state:{sales:{trend:[{key:"同周比",value:.12},{key:"日环比",value:-.11}],daily:0,total:0,totalDetails:[]},visitors:{daily:0,chart:[],total:0},payments:{total:0,chart:[],rate:.6},operations:{influence:0,trend:[{key:"同周比",value:.12},{key:"日环比",value:-.11}],conversion:.1},rankList:[{name:"sample name",value:1e4}],searchData:{total:{value:12321,trend:.1},average:{value:2.7,trend:-.2},chart:[{name:"default title",data:1234}]},salesType:{all:[{name:"sample 1",value:123},{name:"sample 2",value:234}],online:[{name:"sample 1",value:123}],offline:[{name:"sample 2",value:234}]}},getters:{getAllSalesType:function(e){return K(E()(e.salesType.all))},getOnlineSalesType:function(e){return K(E()(e.salesType.online))},getOfflineSalesType:function(e){return K(E()(e.salesType.offline))},getAllSum:function(e){return Y(E()(e.salesType.all))},getOnlineSum:function(e){return Y(E()(e.salesType.online))},getOfflineSum:function(e){return Y(E()(e.salesType.offline))},getAllDetails:function(e,t){return H(E()(e.salesType.all),t.getAllSum)},getOnlineDetails:function(e,t){return H(E()(e.salesType.online),t.getOnlineSum)},getOfflineDetails:function(e,t){return H(E()(e.salesType.offline),t.getOfflineSum)}},mutations:(Z={},g()(Z,Q,function(e,t){e.sales=t}),g()(Z,z,function(e,t){e.visitors=t}),g()(Z,$,function(e,t){e.payments=t}),g()(Z,ee,function(e,t){e.operations=t}),g()(Z,te,function(e,t){e.rankList=t}),g()(Z,ne,function(e,t){e.searchData=t}),g()(Z,re,function(e,t){e.salesType=t}),Z),actions:{fetchAnalysis:function(e){var t=e.commit;W.get(F).then(function(e){var n=e.data;t(Q,n.sales),t(z,n.visitors),t($,n.payments),t(ee,n.operations),t(te,n.rankList),t(ne,n.searchData),t(re,n.salesType)})}}};function ae(e){return e.reduce(function(e,t){return e+t})}var ie,ce,se="SET_PROJECTS",ue="SET_ACTIVITIES",le="SET_RADAR",fe="SET_TEAMS",me={state:{projects:[{id:"xxx1",title:"Vue.js",logo:"",description:"那是一种内在的东西，他们到达不了，也无法触及的",updatedAt:new Date,member:"科学搬砖组",href:"",memberLink:""}],activities:[{user:{name:"Bowen",avatar:""},updateAt:+new Date,group:{name:"Github",link:"https://github.com/lbwa"},project:{name:"Vue Design Pro",link:"https://github.com/lbwa/vue-design-pro"},template:"在 @{group} 新建项目 @{project}"}],radar:[],teams:[{name:"科学搬砖组",avatar:""}]},getters:{getFormatRadar:function(e){return function(e){var t=[],n=["#1890ff","#facc14","#2fc25b"],r=0;return e.forEach(function(e){var o=[],a=[];Object.keys(e).forEach(function(t){"number"==typeof e[t]&&(o.push(t),a.push(e[t]))}),t.push({data:a,fill:!1,borderColor:n[r++]})}),t}(E()(e.radar))},getPersonSum:function(e,t){var n=t.getFormatRadar;return n[0]?ae(n[0].data):0},getTeamSum:function(e,t){var n=t.getFormatRadar;return n[1]?ae(n[1].data):0},getDepartmentSum:function(e,t){var n=t.getFormatRadar;return n[2]?ae(n[2].data):0}},mutations:(ie={},g()(ie,se,function(e,t){e.projects=t}),g()(ie,ue,function(e,t){e.activities=t}),g()(ie,le,function(e,t){e.radar=t}),g()(ie,fe,function(e,t){e.teams=t}),ie),actions:{fetchWorkspace:function(e){var t=e.commit;Promise.all([W.get(D),W.get(C),W.get(L),W.get(U)]).then(function(e){t(se,e[0].data),t(ue,e[1].data),t(le,e[2].data),t(fe,e[3].data)}).catch(function(e){return console.error(e)})}}},pe="SET_PAY_ACCOUNT",de="SET_RECEIVER_ACCOUNT",he="SET_RECEIVER_TYPE",ve="SET_RECEIVER_NAME",ge="SET_AMOUNT",Se={state:{form:{payAccount:"vue-design-pro@github.com",receiverAccount:"yourname@github.com",receiverType:"alipay",receiverName:"Bowen",amount:"10000"}},mutations:(ce={},g()(ce,pe,function(e,t){e.form.payAccount=t}),g()(ce,de,function(e,t){e.form.receiverAccount=t.target.value}),g()(ce,he,function(e,t){e.form.receiverType=t}),g()(ce,ve,function(e,t){e.form.receiverName=t.target.value}),g()(ce,ge,function(e,t){var n=parseFloat(t.target.value);e.form.amount=isNaN(n)?0:n}),ce),actions:{pushStepForm:function(e,t){e.commit;var n=e.state;return function(e){return W.post(N,e)}(c()({},n.form,{password:t})).then(function(e){return e.data}).then(function(e){if(0!==e.errno)throw new Error("[pushStepForm]: ".concat(e.message));return e})}}},Ee={actions:{pushBasicForm:function(e,t){e.commit;return function(e){return W.post(x,e)}(t).then(function(e){return e.data}).then(function(e){return 0!==e.errno?console.error(new Error("[pushBasicForm]: ".concat(e.message))):e})}}},ye={login:c()({namespaced:!0},J),analysis:c()({namespaced:!0},oe),workspace:c()({namespaced:!0},me),formStep:c()({namespaced:!0},Se),formBasic:c()({namespaced:!0},Ee)},Te=g()({},"TOGGLE_ASIDE",function(e){e.isCollapse=!e.isCollapse});r.default.use(a.a);var Ae=new a.a.Store({modules:ye,state:{isCollapse:!1},mutations:Te,strict:!1,plugins:[]}),we=n("Mj6V"),be=n.n(we);n("pdi6");r.default.use(o.a);var ke=new o.a({routes:p});ke.beforeEach(function(e,t,n){be.a.start(),"/"!==e.path?B()?(Ae.getters["login/userInfo"].name||"/"===e.path||Ae.dispatch("login/fetchUserInfo").catch(console.error),Ae.getters["login/role"].length||Ae.dispatch("login/validateToken"),n()):n({path:"/?redirect=".concat(e.path),replace:!0}):n()}),ke.afterEach(function(e,t){be.a.done()});var Re=ke,_e=(n("9d8Q"),n("D66Q"),n("JGWq"),n("EXSd"));r.default.use(G.a),new r.default({el:"#root",router:Re,store:Ae,render:function(e){return e(_e.default)}})}},[["tjUo",17,0,16]]]);